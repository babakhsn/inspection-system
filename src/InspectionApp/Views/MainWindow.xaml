<Window x:Class="InspectionApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:InspectionApp.ViewModels"
        Title="InspectionApp" Height="400" Width="600">
    <!--<Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>-->


    <DockPanel LastChildFill="True">
        <!-- Top Bar -->
        <Border DockPanel.Dock="Top" Padding="12" Background="#F5F5F7" BorderBrush="#E5E5EA" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="{Binding Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,16,0"/>
                <Separator Width="1" Height="20" Margin="8,0" />
                <TextBlock Text="Shell" Opacity="0.7" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Status Bar -->
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem>
                <TextBlock>
                    <Run Text="Last action:"/>
                    <Run Text="{Binding LastAction, StringFormat=' {0:HH:mm:ss}'}"/>
                </TextBlock>
            </StatusBarItem>
        </StatusBar>

        <!-- Main Content -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Controls Panel -->
            <Border Grid.Column="0" Padding="12" BorderBrush="#E5E5EA" BorderThickness="0,0,1,0" Background="White">
                <StackPanel>
                    <TextBlock Text="Controls" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Start Capture"
                                Command="{Binding StartCaptureCommand}"
                                Width="110" Margin="0,0,8,0"/>
                        <Button Content="Stop"
                                Command="{Binding StopCaptureCommand}"
                                Width="80"/>
                    </StackPanel>
                    <Button Content="Save Frame"
                        Command="{Binding CaptureFrameCommand}"
                        ToolTip="Save current frame to disk"/>

                    <TextBlock Text="Save Folder" Margin="0,12,0,4" />
                    <TextBox Text="{Binding CaptureDirectory, UpdateSourceTrigger=PropertyChanged}" />

                    <!-- Future placeholders (disabled for now to show intent/consistency) -->
                    <TextBlock Text="Filter (Coming Day 6)" Margin="0,12,0,4" Opacity="0.6"/>
                    <ComboBox IsEnabled="False" />
                    <TextBlock Text="Motor (Coming Day 8)" Margin="0,12,0,4" Opacity="0.6"/>
                    <Slider Minimum="0" Maximum="100" IsEnabled="False"/>
                </StackPanel>
            </Border>

            <!-- Camera Placeholder -->
            <Border Grid.Column="1" Margin="12"
                    Background="#FAFAFB" CornerRadius="8"
                    BorderBrush="#E5E5EA" BorderThickness="1"
                    Padding="12" >
                <Grid>
                    <Image Source="{Binding LiveFrame}"
               Stretch="Uniform"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"/>
                    <TextBlock Text="No signal"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontSize="16" Opacity="0.4"
                   Visibility="{Binding LiveFrame, Converter={StaticResource NullToVisibilityConverter}}"/>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
    <!--<Grid>
        <TextBlock Text="{Binding Title}" 
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Center" 
                   FontSize="20"/>
    </Grid>-->
</Window>
